@using Microsoft.SemanticKernel.ChatCompletion
@using Chat.WebBlazorServer.Models



@if (ChatHistory != null)
{
    @for (int i = 0; i < ChatHistory.Count; i++)
    {
        @if (ChatHistory[i].Role == AuthorRole.User)
        {
            <div class="d-flex flex-row-reverse m-1 @ChatHistory[i].Role">
                <img class="mb-1" src="images/user_icon.png" />
            </div>
            <div class="d-flex flex-row-reverse m-1 text-primary fw-bold @ChatHistory[i].Role">
                <pre style="max-width: 75%;">
                    @ChatHistory[i].Content
                </pre>
            </div>
        }
        else if (ChatHistory[i].Role == AuthorRole.Assistant)
        {
            <div class="row m-1 align-items-start @ChatHistory[i].Role">
                <div class="col-10 col-auto">
                    <pre class="p-2 m-0 text-wrap">
                        <img src="images/ai_icon.png" />
                        <br />
                        <br />
                        @ChatHistory[i].Content
                    </pre>
                </div>
            </div>
        }
        else
        {
            <div class="row @ChatHistory[i].Role">
                <div class="d-none">
                    @ChatHistory[i].Content
                </div>
            </div>
        }
    }
}

@code {
    [Parameter]
    public ChatHistory? ChatHistory { get; set; }
}